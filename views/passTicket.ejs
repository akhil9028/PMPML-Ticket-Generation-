<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bus Ticket</title>
    <link rel="stylesheet" href="passTicket.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Ubuntu:wght@300&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/cf268fac04.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
  </head>
  <body>
    <div class="navbar">
      <img src="images/logo4.png" alt="sbdhm" />
      <a href="#" onclick="toggleDropdown()"
        ><i class="fa-solid fa-bars fa-2xl"></i
      ></a>
      <div id="dropdown" class="dropdown-content">
        <a href="index.html">Home</a>
        <a href="about_us.html">About Us</a>
        <a href="#">Helpline</a>
      </div>
    </div>

    <div class="tic-flex">
      <div class="ticket" id="invoice">
        <img src="images/logo4.png" alt="logo" width="100 px" height="100px" />
        <!-- <img class="buslogo" src="images/bus emoji.jfif" alt="bus" width="100px" height="100px"> -->
        <div class="ticket-header">
          <h2>Bus Pass</h2>
        </div>
        <div class="ticket-info">
          <p>Bus Number :<span id="bus-id">XYZ123</span></p>
          <p>Date :<span id="date">March 5, 2024</span></p>
          <!-- <img id="cally"  src="images/calender.png" alt="calender" height="30px"  > -->
          <p>Time: <span id="time">10:00 AM</span></p>
          <p>Tickets: <span id="tckkt">2</span></p>
          <p><span>Price:</span> <span id="passPrice">$10.00</span></p>
        </div>
        <div class="ticket-valid">
          <p><span>Valid Till:</span> 12:00 AM</p>
        </div>
        <div>
          <img
            class="qr qr-codes"
            src="images/qr.png"
            alt="QR Code"
            height="100px"
            width="100px"
          />
        </div>
        <div class="helpline">
          <p><span>Helpline Number:</span> 123-456-7890</p>
        </div>
      </div>

      <button id="downloadBtn">Download Ticket</button>
    </div>

    <script>
      window.onload = function () {
        document.getElementById("downloadBtn").addEventListener("click", () => {
          const invoice = this.document.getElementById("invoice");
          console.log(invoice);
          console.log(window);
          html2pdf().from(invoice).save();
        });
      };

      // QR code generator
      var qrImg = document.querySelector(".qr-codes");

      var url = `<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book Ticket</title>
    <link rel="stylesheet" href="verified.css" />
  </head>
  <body>
    <div class="ticketContainer">
      <div class="ticket">
        <div class="ticketTitle">VERIFIED</div>
        <div class="shield">
          <img src="shield3.png" alt="" width="200px" height="200px" />
        </div>
        <hr />
        <div class="ticketDetail">
          <div>Bus No:&ensp; 6969</div>
          <div>Price:&nbsp; 69 Rs</div>
          <div>Time:&emsp; 19:20</div>
        </div>
        <div class="ticketRip">
          <div class="circleLeft"></div>
          <div class="ripLine"></div>
          <div class="circleRight"></div>
        </div>
        <div class="ticketSubDetail">
          <div class="code">Valid Till:12:00PM</div>
          <div class="date">Jan 14<sup>th</sup> 2023</div>
        </div>
      </div>
      <div class="ticketShadow"></div>
    </div>
  </body>
</html>
`;
      // url = "sdf";
      var encodedHtmlContent = btoa(url);
      var htmlUrl = "data:text/html;base64," + encodedHtmlContent;

      qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(
        htmlUrl
      )}`;
    </script>
    <script src="script.js"></script>
  </body>
</html>
